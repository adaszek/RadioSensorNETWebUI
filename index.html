<!doctype html>
<html>
  <head>
    <title>Radio Sensor NET WebUI</title>
    <script type="text/javascript" src="/dg/dygraph.js"></script>
    <link rel="stylesheet" src="/dg/dygraph.css" />
  </head>
  <body>
    <script src="/socket.io/socket.io.js"></script>
    <script src="http://code.jquery.com/jquery-1.11.1.js"></script>
    <div id="graphdiv3" style="width:1500px; height:900px;"></div>
    <script>
        var socket = io();
        var g3 = new Dygraph(document.getElementById("graphdiv3"), 
            [],
            {
                dateWindow: [ Date.now() - 60000*60*24, Date.now() ],
                drawPoints: true,
                showRoller: true,
                labels: ['Time', 'Measurement']
            }
        )

        socket.on('dataEvent', function(data) {
            var array = [];
            for(var key in data) {
                array.push([
                    new Date(parseInt(key)*1000),
                    parseFloat(data[key])
                ]);
            }
            alert(array.length);
            g3.updateOptions( { 'file': array } );
        });

    </script>
  </body>
</html>
